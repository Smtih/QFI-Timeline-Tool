(this["webpackJsonpqfi-timeline-tool"]=this["webpackJsonpqfi-timeline-tool"]||[]).push([[0],{240:function(e,t,n){e.exports=n(500)},245:function(e,t,n){},262:function(e,t){},264:function(e,t){},294:function(e,t){},295:function(e,t){},360:function(e,t){},500:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(24),c=n.n(l),i=(n(245),n(38)),o=n(145),u=n.n(o),s=n(62),b=n(61),m=n(220),d=n(221),f=n.n(d),O=n(10),g=n(222),p=n(223),v=n(29),j=n.n(v),E=function(){function e(t,n){Object(g.a)(this,e),this.globalStorageKey="".concat("QFI_TIMELINE_TOOL","_GLOBAL"),this.timeoutStorageKey="".concat("QFI_TIMELINE_TOOL","_TIMEOUT"),this.initialGlobal=void 0,this.timeoutMs=void 0,this.initialGlobal=t,null!=n?(localStorage.setItem(this.timeoutStorageKey,String(n)),this.timeoutMs=n):this.timeoutMs=Number(localStorage.getItem(this.timeoutStorageKey)||432e5)}return Object(p.a)(e,[{key:"initialise",value:function(e){var t=this,n=this.getGlobal();Object(O.addCallback)((function(e){return t.storeGlobal(e)})),Object(O.setGlobal)(n),e(n)}},{key:"storeGlobal",value:function(e){localStorage.setItem(this.globalStorageKey,JSON.stringify({lastModified:j()().toISOString(),global:e}))}},{key:"getGlobal",value:function(){var e=localStorage.getItem(this.globalStorageKey);if(!e)return this.initialGlobal;var t=JSON.parse(e),n=t.lastModified,a=t.global;return n&&j()().diff(n)>this.timeoutMs?this.initialGlobal:a||this.initialGlobal}}]),e}(),h=n(224),y=n.n(h);var k=function(){var e=y.a.parse(window.location.search),t=e.key,n=e.timeout;return{key:"string"===typeof t?t:void 0,timeout:"string"===typeof n?60*Number(n)*1e3:void 0}}(),G=k.key;function x(){return(x=Object(m.a)(u.a.mark((function e(t){var n,a,r,l,c,i,o,b,m,d,g,p,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.key){e.next=13;break}if(G){e.next=3;break}throw new Error("No Sheet Key In Url");case 3:return e.next=5,f.a.init({key:G,parseNumbers:!0});case 5:return n=e.sent,a=n.Suspects.elements,r=a.map((function(e){return Object(s.a)({},e,{visible:!0})})).map(I),l=n.Locations.elements,c=l.map(I),i=n.Settings.elements[0],o=i.defaultDate,b=i.defaultLat,m=i.defaultLng,d=i.defaultZoomLevel,g=i.startDate,p=i.endDate,v=i.intervalMinutes,e.next=13,Object(O.setGlobal)(Object(s.a)({},t,{key:G,suspects:r,savedAddresses:c,currentDate:o,defaultCenter:{lat:b,lng:m},defaultZoom:d,startDate:g,endDate:p,intervalMinutes:v}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){var t=e.lat,n=e.lng,a=Object(b.a)(e,["lat","lng"]);return Object(s.a)({},a,{location:{lat:t,lng:n}})}new E({savedAddresses:[],suspects:[],currentDate:"2019-05-12T10:00:00.000+10",defaultCenter:{lat:-37.714145,lng:145.065955},defaultZoom:14,intervalMinutes:30,startDate:"2019-05-12T06:00:00.000+10",endDate:"2019-05-14T22:00:00.000+10"},k.timeout).initialise((function(e){(function(e){return x.apply(this,arguments)})(e).then((function(){window.history.replaceState({},document.title,window.location.pathname)}))}));var S=n(39),C=n(12),L=n(526),w=n(107);function M(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  justify-content: center;\n"]);return M=function(){return e},e}function D(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  padding: 16px;\n"]);return D=function(){return e},e}function T(e){var t=Object.assign({},e),n=Object(O.useGlobal)("currentDate"),a=Object(C.a)(n,2),l=a[0],c=a[1],i=Object(O.useGlobal)("startDate"),o=Object(C.a)(i,1)[0],u=Object(O.useGlobal)("endDate"),s=Object(C.a)(u,1)[0],b=Object(O.useGlobal)("intervalMinutes"),m=Object(C.a)(b,1)[0];return r.a.createElement(N,t,r.a.createElement(P,null,r.a.createElement(w.a,null,A(l))),r.a.createElement(P,null,r.a.createElement(w.a,{style:{paddingRight:16,textAlign:"right"}},A(o)),r.a.createElement(L.a,{value:j()(l).unix(),onChange:function(e,t){return c(j.a.unix(t).toISOString())},step:60*m,min:j()(o).unix(),max:j()(s).unix()}),r.a.createElement(w.a,{style:{paddingLeft:16,textAlign:"left"}},A(s))))}function A(e){return j()(e).format("DD/MM/YYYY hh:mm a")}var N=S.a.div(D()),P=S.a.div(M()),K=n(81);function _(){var e=Object(i.a)(["\n  display: flex;\n  flex: 1;\n"]);return _=function(){return e},e}function B(e){var t=Object.assign({},e),n=Object(O.useGlobal)("currentPosition"),a=Object(C.a)(n,2),l=a[0],c=a[1],i=Object(O.useGlobal)("searchedAddress"),o=Object(C.a)(i,1)[0],u=Object(O.useGlobal)("savedAddresses"),s=Object(C.a)(u,1)[0],b=Object(O.useGlobal)("suspects"),m=Object(C.a)(b,1)[0],d=Object(O.useGlobal)("currentDate"),f=Object(C.a)(d,1)[0],g=Object(O.useGlobal)("defaultZoom"),p=Object(C.a)(g,1)[0],v=Object(O.useGlobal)("defaultCenter"),E=Object(C.a)(v,1)[0],h=m.filter((function(e){var t=e.startTime,n=e.endTime;return e.visible&&j()(f).isBetween(t,n,void 0,"[)")}));return r.a.createElement(J,Object.assign({style:{width:"100%",height:"100%",position:"relative"}},t),r.a.createElement(K.Map,{style:{width:"100%",height:"100%",position:"relative"},google:google,zoom:p,initialCenter:E,center:l,onDragend:function(){return c(void 0)}},s.map((function(e,t){var n=e.firstLine,a=e.location;return r.a.createElement(K.Marker,{key:t,title:n,icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",position:a})})),h.map((function(e,t){var n=e.location,a=e.radius,l=e.color;return r.a.createElement(K.Circle,{key:t,center:n,radius:a,fillColor:l,strokeColor:l})})),o&&r.a.createElement(K.Marker,{title:o.firstLine,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",position:o.location})))}var J=S.a.div(_()),Y=n(524),Z=n(528),F=n(529),H=n(106),U=n.n(H),q=n(235);function z(){var e=Object(i.a)(["\n  width: 100%;\n"]);return z=function(){return e},e}function Q(e){var t=Object.assign({},e),n=Object(a.useState)(""),l=Object(C.a)(n,2),c=l[0],i=l[1],o=Object(O.useGlobal)("searchedAddress"),u=Object(C.a)(o,2)[1],s=Object(O.useGlobal)("currentPosition"),b=Object(C.a)(s,2)[1],m=Object(a.useCallback)((function(e){e&&i(e)}),[i]),d=Object(a.useCallback)((function(e){if(e){var t=e.value;m(t.description),Object(H.geocodeByPlaceId)(t.placeId).then((function(e){return Object(H.getLatLng)(e[0])})).then((function(e){u({placeId:t.placeId,firstLine:t.formattedSuggestion.mainText,secondLine:t.formattedSuggestion.secondaryText,location:e}),b(e)})).catch((function(e){console.error(e)}))}}),[m,u,b]);return r.a.createElement(F.a,Object.assign({component:"div"},t),r.a.createElement(U.a,{debounce:500,value:c,onChange:m,searchOptions:V},(function(e){var t=e.getInputProps,n=e.suggestions,a=t().onChange,l=n.map((function(e){return{value:e,label:e.description}}));return r.a.createElement(W,null,r.a.createElement(q.a,{menuIsOpen:l.length>0,filterOption:function(){return!0},onInputChange:function(e){return a({target:{value:e}})},components:R,placeholder:"Search",options:l,onChange:d}))})))}var R={DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}},V={location:new google.maps.LatLng(-37,144),radius:5e3,componentRestrictions:{country:"AU"}},W=S.a.div(z()),X=n(105),$=n(518),ee=n(519),te=n(520),ne=n(521);function ae(e){e.style;var t=Object(O.useGlobal)("savedAddresses"),n=Object(C.a)(t,2),l=n[0],c=n[1],i=Object(O.useGlobal)("searchedAddress"),o=Object(C.a)(i,1)[0],u=Object(O.useGlobal)("currentPosition"),s=Object(C.a)(u,2)[1],b=Object(a.useCallback)((function(){if(o){var e=[].concat(Object(X.a)(l),[o]);c(e)}}),[l,c,o]),m=Object(a.useMemo)((function(){return!!o&&!!l.find((function(e){return e.placeId===o.placeId}))}),[l,o]);return o?r.a.createElement(F.a,{button:!0,onClick:function(){return s(o.location)}},r.a.createElement($.a,null,r.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",alt:"Pin Icon"})),r.a.createElement(ee.a,{primary:o.firstLine,secondary:o.secondLine}),r.a.createElement(te.a,null,r.a.createElement(ne.a,{disabled:m,variant:"outlined",onClick:function(){return b()}},"Save"))):null}var re=n(231),le=n.n(re),ce=n(525),ie=n(527),oe=n(522),ue=n(523),se=function(e){var t=e.title,n=e.subHeader,l=e.children,c=Object(a.useState)(!0),i=Object(C.a)(c,2),o=i[0],u=i[1],s=Object(a.useCallback)((function(){return u(!o)}),[u,o]);return r.a.createElement(a.Fragment,null,r.a.createElement(F.a,{button:!0,onClick:s},r.a.createElement(ee.a,{primary:t}),o?r.a.createElement(oe.a,null):r.a.createElement(ue.a,null)),r.a.createElement(ie.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(Y.a,{component:"div",disablePadding:!0,subheader:n},l)))};function be(){var e=Object(O.useGlobal)("currentPosition"),t=Object(C.a)(e,2)[1],n=Object(O.useGlobal)("savedAddresses"),l=Object(C.a)(n,2),c=l[0],i=l[1],o=Object(a.useCallback)((function(e){var t=e.placeId,n=c.filter((function(e){var n=e.placeId;return t!==n}));i(n)}),[c,i]);return r.a.createElement(se,{title:"Saved Locations",subHeader:r.a.createElement(me,{enabled:0===c.length})},c.map((function(e){return r.a.createElement(F.a,{key:e.placeId,button:!0,onClick:function(){return t(e.location)}},r.a.createElement($.a,null,r.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",alt:"Pin Icon"})),r.a.createElement(ee.a,{primary:e.firstLine,secondary:e.secondLine}),r.a.createElement(te.a,null,r.a.createElement(ce.a,{onClick:function(){return o(e)}},r.a.createElement(le.a,null))))})))}function me(e){var t=e.enabled;Object(b.a)(e,["enabled"]);return t?r.a.createElement(w.a,null,"No saved locations yet..."):null}var de=n(232),fe=n.n(de),Oe=n(233),ge=n.n(Oe),pe=n(234),ve=n.n(pe);function je(){var e=Object(O.useGlobal)("suspects"),t=Object(C.a)(e,2),n=t[0],l=t[1],c=Object(O.useGlobal)("currentDate"),i=Object(C.a)(c,1)[0],o=Object(O.useGlobal)("currentPosition"),u=Object(C.a)(o,2)[1],b=n.filter((function(e){var t=e.startTime,n=e.endTime;return j()(i).isBetween(t,n,void 0,"[)")})),m=Object(a.useCallback)((function(e){var t=Object(X.a)(n),a=Object(s.a)({},e,{visible:!e.visible});t[n.indexOf(e)]=a,l(t)}),[n,l]);return r.a.createElement(se,{title:"Suspect Locations",subHeader:r.a.createElement(Ee,{enabled:0===n.length})},b.map((function(e,t){return r.a.createElement(F.a,{key:t,button:!0,onClick:function(){return u(e.location)}},r.a.createElement($.a,null,r.a.createElement(fe.a,{style:{color:e.color},fontSize:"large"})),r.a.createElement(ee.a,{primary:e.name}),r.a.createElement(te.a,null,r.a.createElement(ce.a,{onClick:function(){return m(e)}},e.visible?r.a.createElement(ge.a,null):r.a.createElement(ve.a,null))))})))}function Ee(e){var t=e.enabled;Object(b.a)(e,["enabled"]);return t?r.a.createElement(w.a,null,"No suspects found"):null}function he(e){var t=Object.assign({},e);return r.a.createElement(Y.a,Object.assign({component:Z.a},t),r.a.createElement(Q,null),r.a.createElement(ae,null),r.a.createElement(be,null),r.a.createElement(je,null))}function ye(){var e=Object(i.a)(["\n  flex-direction: row;\n  height: 100vh;\n  width: 100vw;\n"]);return ye=function(){return e},e}function ke(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);return ke=function(){return e},e}var Ge=S.a.div(ke()),xe=Object(S.a)(Ge)(ye());c.a.render(r.a.createElement((function(e){var t=Object.assign({},e);return r.a.createElement(xe,t,r.a.createElement(he,{style:{flex:"1 1 100px"}}),r.a.createElement(Ge,{style:{flex:"5 5 0"}},r.a.createElement(B,null),r.a.createElement(T,null)))}),null),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.cdf23ac4.chunk.js.map