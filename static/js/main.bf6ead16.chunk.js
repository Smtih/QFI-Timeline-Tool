(this["webpackJsonpqfi-timeline-tool"]=this["webpackJsonpqfi-timeline-tool"]||[]).push([[0],{122:function(e,t,n){e.exports=n(196)},127:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(12),c=n.n(r),i=(n(127),n(20)),o=n(77),u=n.n(o),s=n(16),b=n(33),d=n(100),m=n(101),f=n.n(m),O=n(8),g=n(102),j=n(103),v=n(19),p=n.n(v),E=function(){function e(t,n){if(Object(g.a)(this,e),this.initialGlobal=t,this.globalStorageKey="".concat("QFI_TIMELINE_TOOL","_GLOBAL"),this.timeoutStorageKey="".concat("QFI_TIMELINE_TOOL","_TIMEOUT"),this.timeoutMs=void 0,null!=n)localStorage.setItem(this.timeoutStorageKey,String(n)),this.timeoutMs=n;else{var a=localStorage.getItem(this.timeoutStorageKey);null==a?(this.timeoutMs=432e5,localStorage.setItem(this.timeoutStorageKey,String(this.timeoutMs))):this.timeoutMs=Number(a)}}return Object(j.a)(e,[{key:"initialise",value:function(e){var t=this,n=this.getGlobal();Object(O.addCallback)((function(e){return t.storeGlobal(e)})),Object(O.setGlobal)(n),e(n)}},{key:"storeGlobal",value:function(e){localStorage.setItem(this.globalStorageKey,JSON.stringify({lastModified:p()().toISOString(),global:e}))}},{key:"getGlobal",value:function(){var e=localStorage.getItem(this.globalStorageKey);if(!e)return this.initialGlobal;var t=JSON.parse(e),n=t.lastModified,a=t.global;return n&&p()().diff(n)>this.timeoutMs?this.initialGlobal:a||this.initialGlobal}}]),e}(),h=n(104),y=n.n(h);var k=function(){var e=y.a.parse(window.location.search),t=e.key,n=e.timeout;return{key:"string"===typeof t?t:void 0,timeout:"string"===typeof n?60*Number(n)*1e3:void 0}}(),x=k.key;function S(){return(S=Object(d.a)(u.a.mark((function e(t){var n,a,l,r,c,i,o,b,d,m,g,j,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.key||!x){e.next=11;break}return e.next=3,f.a.init({key:x,parseNumbers:!0});case 3:return n=e.sent,a=n.Suspects.elements,l=a.map(L),r=n.Locations.elements,c=r.map(C),i=n.Settings.elements[0],o=i.defaultDate,b=i.defaultLat,d=i.defaultLng,m=i.defaultZoomLevel,g=i.startDate,j=i.endDate,v=i.intervalMinutes,e.next=11,Object(O.setGlobal)(Object(s.a)(Object(s.a)({},t),{},{key:x,suspects:l,savedAddresses:c,currentDate:o,defaultCenter:{lat:b,lng:d},defaultZoom:m,startDate:g,endDate:j,intervalMinutes:v}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){var t=e.lat,n=e.lng,a=Object(b.a)(e,["lat","lng"]);return Object(s.a)(Object(s.a)({},a),{},{location:G({lat:t,lng:n},a.radius),visible:!0})}function G(e,t){var n=e.lat,a=e.lng,l=t/111e3*Math.sqrt(Math.random()),r=2*Math.PI*Math.random(),c=l*Math.cos(r);return{lat:l*Math.sin(r)+n,lng:c/Math.cos(n*Math.PI/180)+a}}function C(e){var t=e.lat,n=e.lng,a=Object(b.a)(e,["lat","lng"]);return Object(s.a)(Object(s.a)({},a),{},{location:{lat:t,lng:n}})}new E({savedAddresses:[],suspects:[],currentDate:"2019-05-12T10:00:00.000+10",defaultCenter:{lat:-37.714145,lng:145.065955},defaultZoom:14,intervalMinutes:30,startDate:"2019-05-12T06:00:00.000+10",endDate:"2019-05-14T22:00:00.000+10"},k.timeout).initialise((function(e){(function(e){return S.apply(this,arguments)})(e).then((function(){window.history.replaceState({},document.title,window.location.pathname)}))}));var I=n(21),M=n(9),w=n(253),T=n(64);function D(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  justify-content: center;\n"]);return D=function(){return e},e}function A(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  padding: 16px;\n"]);return A=function(){return e},e}function P(e){var t=Object.assign({},e),n=Object(O.useGlobal)("currentDate"),a=Object(M.a)(n,2),r=a[0],c=a[1],i=Object(O.useGlobal)("startDate"),o=Object(M.a)(i,1)[0],u=Object(O.useGlobal)("endDate"),s=Object(M.a)(u,1)[0],b=Object(O.useGlobal)("intervalMinutes"),d=Object(M.a)(b,1)[0];return l.a.createElement(F,t,l.a.createElement(K,null,l.a.createElement(T.a,null,N(r))),l.a.createElement(K,null,l.a.createElement(T.a,{style:{paddingRight:16,textAlign:"right"}},N(o)),l.a.createElement(w.a,{value:p()(r).unix(),onChange:function(e,t){return c(p.a.unix(t).toISOString())},step:60*d,min:p()(o).unix(),max:p()(s).unix()}),l.a.createElement(T.a,{style:{paddingLeft:16,textAlign:"left"}},N(s))))}function N(e){return p()(e).format("DD/MM/YYYY hh:mm a")}var F=I.a.div(A()),K=I.a.div(D()),_=n(42);function B(){var e=Object(i.a)(["\n  display: flex;\n  flex: 1;\n"]);return B=function(){return e},e}function J(e){var t=Object.assign({},e),n=Object(O.useGlobal)("currentPosition"),a=Object(M.a)(n,2),r=a[0],c=a[1],i=Object(O.useGlobal)("searchedAddress"),o=Object(M.a)(i,1)[0],u=Object(O.useGlobal)("savedAddresses"),s=Object(M.a)(u,1)[0],b=Object(O.useGlobal)("suspects"),d=Object(M.a)(b,1)[0],m=Object(O.useGlobal)("currentDate"),f=Object(M.a)(m,1)[0],g=Object(O.useGlobal)("defaultZoom"),j=Object(M.a)(g,1)[0],v=Object(O.useGlobal)("defaultCenter"),E=Object(M.a)(v,1)[0],h=Object(O.useState)(),y=Object(M.a)(h,2),k=y[0],x=y[1],S=d.filter((function(e){var t=e.startTime,n=e.endTime;return e.visible&&p()(f).isBetween(t,n,void 0,"[)")}));return l.a.createElement(Y,Object.assign({style:{width:"100%",height:"100%",position:"relative"}},t),l.a.createElement(_.Map,{style:{width:"100%",height:"100%",position:"relative"},google:google,zoom:j,initialCenter:E,center:r,onDragend:function(){return c(void 0)}},s.map((function(e,t){var n=e.firstLine,a=e.secondLine,r=e.location;return l.a.createElement(_.Marker,{onClick:function(){x({location:r,firstLine:n,secondLine:a})},key:t,title:n,icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",position:r})})),S.map((function(e,t){var n=e.location,a=e.radius,r=e.color,c=e.name,i=e.startTime,o=e.endTime;return l.a.createElement(_.Circle,{onClick:function(){x({location:n,firstLine:c,secondLine:"".concat(N(i)," - ").concat(N(o))})},key:t,center:n,radius:a,fillColor:r,strokeColor:r})})),o&&l.a.createElement(_.Marker,{onClick:function(){x(o)},title:o.firstLine,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",position:o.location}),l.a.createElement(_.InfoWindow,{visible:!!k,position:null===k||void 0===k?void 0:k.location,onClose:function(){return x(void 0)}},l.a.createElement("div",null,l.a.createElement("p",null,null===k||void 0===k?void 0:k.firstLine),l.a.createElement("p",null,null===k||void 0===k?void 0:k.secondLine)))))}var Y=I.a.div(B()),Z=n(240),q=n(249),H=n(37),z=n(237),Q=n(63),R=n.n(Q),U=n(250),V=n(251);function W(e){var t=Object.assign({},e),n=Object(a.useState)(""),r=Object(M.a)(n,2),c=r[0],i=r[1],o=Object(O.useGlobal)("searchedAddress"),u=Object(M.a)(o,2)[1],b=Object(O.useGlobal)("currentPosition"),d=Object(M.a)(b,2),m=d[0],f=d[1],g=Object(O.useGlobal)("defaultCenter"),j=Object(M.a)(g,1)[0],v=Object(a.useCallback)((function(e){i("string"===typeof e?e:"")}),[i]),p=Object(a.useCallback)((function(e,t){t&&(v(t.description),Object(Q.geocodeByPlaceId)(t.placeId).then((function(e){return Object(Q.getLatLng)(e[0])})).then((function(e){u({placeId:t.placeId,firstLine:t.formattedSuggestion.mainText,secondLine:t.formattedSuggestion.secondaryText,location:e}),f(e)})).catch((function(e){console.error(e)})))}),[v,u,f]);return l.a.createElement(z.a,Object.assign({component:"div"},t),l.a.createElement(R.a,{debounce:500,value:c,onChange:v,searchOptions:Object(s.a)({location:new google.maps.LatLng(m||j)},X)},(function(e){var t=e.getInputProps,n=e.suggestions,a=t(),r=a.onChange,c=a.value;return l.a.createElement(V.a,{style:{display:"flex",flex:1},options:Object(H.a)(n),getOptionLabel:function(e){return e.description},onInputChange:r,onChange:p,inputValue:c,freeSolo:!0,selectOnFocus:!0,renderInput:function(e){return l.a.createElement(U.a,Object.assign({},e,{fullWidth:!0,label:"Places Search",variant:"outlined"}))}})})))}var X={radius:5e3,componentRestrictions:{country:"AU"}},$=n(243),ee=n(244),te=n(245),ne=n(241),ae=n(252),le=n(197),re=n(242);function ce(){var e=Object(i.a)(["\n  display: flex;\n  align-self: center;\n  justify-self: center;\n  align-items: center;\n  justify-content: center;\n"]);return ce=function(){return e},e}function ie(){var e=Object(i.a)(["\n  min-width: 300px;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n"]);return ie=function(){return e},e}var oe=function(e){var t=e.closeModal,n=Object(O.useGlobal)("savedAddresses"),r=Object(M.a)(n,2),c=r[0],i=r[1],o=Object(O.useGlobal)("searchedAddress"),u=Object(M.a)(o,1)[0],b=Object(a.useState)((null===u||void 0===u?void 0:u.firstLine)||""),d=Object(M.a)(b,2),m=d[0],f=d[1],g=Object(a.useCallback)((function(){var e=m.trim();if(e&&u){var n=[].concat(Object(H.a)(c),[Object(s.a)(Object(s.a)({},u),{},{firstLine:e})]);i(n),t()}}),[m,u,c,i,t]);return l.a.createElement(se,null,l.a.createElement(ue,null,l.a.createElement(U.a,{onFocus:function(e){e.target.select()},autoFocus:!0,value:m,onChange:function(e){f(e.target.value)},label:"Location Name",defaultValue:m}),l.a.createElement(ne.a,{style:{marginTop:8},disabled:!m.trim(),variant:"outlined",onClick:g},"Save")))},ue=Object(I.a)(le.a)(ie()),se=Object(I.a)(re.a)(ce());function be(e){e.style;var t=Object(O.useGlobal)("savedAddresses"),n=Object(M.a)(t,1)[0],r=Object(O.useGlobal)("searchedAddress"),c=Object(M.a)(r,1)[0],i=Object(O.useGlobal)("currentPosition"),o=Object(M.a)(i,2)[1],u=Object(a.useState)(!1),s=Object(M.a)(u,2),b=s[0],d=s[1],m=Object(a.useMemo)((function(){return!!c&&!!n.find((function(e){return e.placeId===c.placeId}))}),[n,c]);return c?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{button:!0,onClick:function(){return o(c.location)}},l.a.createElement($.a,null,l.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",alt:"Pin Icon"})),l.a.createElement(ee.a,{primary:c.firstLine,secondary:c.secondLine}),l.a.createElement(te.a,null,l.a.createElement(ne.a,{disabled:m,variant:"outlined",onClick:function(){return d(!0)}},"Save"))),l.a.createElement(ae.a,{style:{outline:0,display:"flex",alignItems:"center",justifyContent:"center"},open:b},l.a.createElement(oe,{closeModal:function(){return d(!1)}}))):null}var de=n(112),me=n.n(de),fe=n(239),Oe=n(248),ge=n(246),je=n(247),ve=function(e){var t=e.title,n=e.subHeader,r=e.children,c=Object(a.useState)(!0),i=Object(M.a)(c,2),o=i[0],u=i[1],s=Object(a.useCallback)((function(){return u(!o)}),[u,o]);return l.a.createElement(a.Fragment,null,l.a.createElement(z.a,{button:!0,onClick:s},l.a.createElement(ee.a,{primary:t}),o?l.a.createElement(ge.a,null):l.a.createElement(je.a,null)),l.a.createElement(Oe.a,{in:o,timeout:"auto",unmountOnExit:!0},l.a.createElement(Z.a,{component:"div",disablePadding:!0,subheader:n},r)))};function pe(){var e=Object(O.useGlobal)("currentPosition"),t=Object(M.a)(e,2)[1],n=Object(O.useGlobal)("savedAddresses"),r=Object(M.a)(n,2),c=r[0],i=r[1],o=Object(a.useCallback)((function(e){var t=e.placeId,n=c.filter((function(e){var n=e.placeId;return t!==n}));i(n)}),[c,i]);return l.a.createElement(ve,{title:"Saved Locations",subHeader:l.a.createElement(Ee,{enabled:0===c.length})},c.map((function(e){return l.a.createElement(z.a,{key:e.placeId,button:!0,onClick:function(){return t(e.location)}},l.a.createElement($.a,null,l.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",alt:"Pin Icon"})),l.a.createElement(ee.a,{primary:e.firstLine,secondary:e.secondLine}),l.a.createElement(te.a,null,l.a.createElement(fe.a,{onClick:function(){return o(e)}},l.a.createElement(me.a,null))))})))}function Ee(e){var t=e.enabled;Object(b.a)(e,["enabled"]);return t?l.a.createElement(T.a,null,"No saved locations yet..."):null}var he=n(113),ye=n.n(he),ke=n(114),xe=n.n(ke),Se=n(115),Le=n.n(Se);function Ge(){var e=Object(O.useGlobal)("suspects"),t=Object(M.a)(e,2),n=t[0],r=t[1],c=Object(O.useGlobal)("currentDate"),i=Object(M.a)(c,1)[0],o=Object(O.useGlobal)("currentPosition"),u=Object(M.a)(o,2)[1],b=n.filter((function(e){var t=e.startTime,n=e.endTime;return p()(i).isBetween(t,n,void 0,"[)")})),d=Object(a.useCallback)((function(e){var t=Object(H.a)(n),a=Object(s.a)(Object(s.a)({},e),{},{visible:!e.visible});t[n.indexOf(e)]=a,r(t)}),[n,r]);return l.a.createElement(ve,{title:"Suspect Locations",subHeader:l.a.createElement(Ce,{enabled:0===n.length})},b.map((function(e,t){return l.a.createElement(z.a,{key:t,button:!0,onClick:function(){return u(e.location)}},l.a.createElement($.a,null,l.a.createElement(ye.a,{style:{color:e.color},fontSize:"large"})),l.a.createElement(ee.a,{primary:e.name}),l.a.createElement(te.a,null,l.a.createElement(fe.a,{onClick:function(){return d(e)}},e.visible?l.a.createElement(xe.a,null):l.a.createElement(Le.a,null))))})))}function Ce(e){var t=e.enabled;Object(b.a)(e,["enabled"]);return t?l.a.createElement(T.a,null,"No suspects found"):null}function Ie(e){var t=Object.assign({},e);return l.a.createElement(Z.a,Object.assign({component:q.a},t),l.a.createElement(W,null),l.a.createElement(be,null),l.a.createElement(pe,null),l.a.createElement(Ge,null))}function Me(){var e=Object(i.a)(["\n  flex-direction: row;\n  height: 100vh;\n  width: 100vw;\n"]);return Me=function(){return e},e}function we(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);return we=function(){return e},e}function Te(e){var t=Object.assign({},e);return l.a.createElement(Ae,t,l.a.createElement(Ie,{style:{flex:"1 1 100px"}}),l.a.createElement(De,{style:{flex:"5 5 0"}},l.a.createElement(J,null),l.a.createElement(P,null)))}var De=I.a.div(we()),Ae=Object(I.a)(De)(Me());c.a.render(l.a.createElement(Te,null),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.bf6ead16.chunk.js.map